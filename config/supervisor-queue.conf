# Supervisor Configuration for Unnar Domain Service Queue Worker
# Save this to: /etc/supervisor/conf.d/unnar-domains-queue.conf
# 
# After saving, run:
# sudo supervisorctl reread
# sudo supervisorctl update
# sudo supervisorctl start unnar-domains-queue:*

[program:unnar-domains-queue]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/unnar-domains/artisan queue:work redis --sleep=3 --tries=3 --max-time=3600
autostart=true
autorestart=true
stderr_logfile=/var/www/unnar-domains/storage/logs/queue-errors.log
stdout_logfile=/var/www/unnar-domains/storage/logs/queue.log
numprocs=4
priority=999
user=www-data
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=10

; If using database queue instead of Redis:
; command=php /var/www/unnar-domains/artisan queue:work database --sleep=3 --tries=3 --max-time=3600

[group:unnar-domains-queue]
programs=unnar-domains-queue
priority=999
